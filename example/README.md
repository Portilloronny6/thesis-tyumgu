# README – JupyterHub + nbgrader

### Общая информация

Данный репозиторий содержит Docker‑образ, который разворачивает **JupyterHub** с настроенным **nbgrader** для двух курсов‑примеров: **course101** и **course123**. Для каждого курса поднимается отдельный сервис *Formgrader*, а также создаётся системный пользователь‑grader.

### Создаваемые пользователи

| Роль          | Логины                                 | Пароль (по умолчанию) |
| ------------- | -------------------------------------- | --------------------- |
| Преподаватели | `instructor1`, `instructor2`           | такой же, как логин   |
| Grader’ы      | `grader-course101`, `grader-course123` | такой же, как логин   |
| Студенты      | `student1`, `student2`                 | такой же, как логин   |

*(После первого запуска обязательно смените пароли.)*

### Структура репозитория

```
.
├── Dockerfile
├── setup.sh
├── jupyterhub_config.py
├── jupyter_server_config.py
├── global_nbgrader_config.py
├── course101_nbgrader_config.py
├── course123_nbgrader_config.py
└── …
```

**Каталог обмена (Exchange):** `/tmp/exchange` с правами `777`.

### Предварительные требования

- Docker ⩾ 20.10.
- Свободно \~4 ГБ ОЗУ.

### Быстрый старт

```bash
docker build -t jhub-nbgrader .
docker run -d --name jhub \
           -p 8000:8000 \
           -v jhub_data:/srv/jupyterhub \
           -v jhub_home:/home \
           jhub-nbgrader
```

Откройте `http://localhost:8000` и войдите под одним из логинов.

### Типовой рабочий процесс

1. **Преподаватель** создает/редактирует ноутбуки в `source`.
2. Нажимает `Create Assignment`, чтобы сформировать выпуск.
3. **Студенты** скачивают, выполняют и загружают задания.
4. **Grader** проверяет их через *Formgrader*.
5. Оценки возвращаются студентам.

### Добавление нового курса

1. Скопируйте шаблон `courseXXX_nbgrader_config.py`, поменяйте `course_id` и `root`.
2. Добавьте курс в массив `courses` в `setup.sh`.
3. Создайте пользователя `grader-<course>`.
4. Пропишите сервис в `jupyterhub_config.py`.
5. Пересоберите образ.

### Управление пользователями

- **Преподаватель**: имя в массив `instructors`.
- **Студент**: имя в массив `students`.

Скрипт автоматически добавит студентов в базы nbgrader каждого курса.

### Данные и резервное копирование

Сохраняйте тома `jhub_data` и `jhub_home`, чтобы не потерять работу преподавателей и студентов.

### Решение проблем

| Симптом                   | Возможная причина       | Как исправить                                 |
| ------------------------- | ----------------------- | --------------------------------------------- |
| Formgrader не открывается | Порт занят              | Измените порт в `jupyterhub_config.py`        |
| 403 при скачивании        | Неверные права Exchange | `chmod 777 /tmp/exchange`                     |
| Нет расширений nbgrader   | Не включены             | `jupyter labextension list` внутри контейнера |

---

## Licencia / Лицензия

MIT – consulta el archivo `LICENSE`.

